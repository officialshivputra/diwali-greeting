<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>рд▓рдХреА рдбреНрд░реЙ тАФ Happy Diwali</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background: #fff8ed; color:#2b2b2b; margin:0; padding:18px;}
  .wrap{max-width:780px;margin:14px auto;}
  .card{background:linear-gradient(120deg,#ffecd2,#fcb69f);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.06);}
  input, button{font-size:16px;padding:10px;border-radius:8px;border:1px solid #e6a373;}
  button{background:#ff5722;color:#fff;border:none;cursor:pointer;margin-left:8px;}
  .share-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px;}
  .note{font-size:13px;color:#5a3b00;margin-top:8px}
  .hidden{display:none}
  .earn-link{margin-top:16px;padding:12px;background:#fff;border-radius:8px;border:1px dashed #ddd;text-align:center}
  .count-badge{background:#fff;padding:6px 10px;border-radius:12px;font-weight:700;display:inline-block;margin-left:8px}
  .terms{background:#fff;padding:12px;border-radius:8px;margin-top:12px;border-left:4px solid #ffd54f}
  .small{font-size:13px;color:#4b4b4b}
</style>
</head>
<body>
<div class="wrap">
  <h1>ЁЯОЖ Happy Diwali тАФ Lucky Draw</h1>
  <div class="card">
    <p style="font-size:18px;margin:0 0 8px 0">ЁЯОЙ <strong id="namePreview">рдЖрдк</strong> рдХреА рддрд░рдлрд╝ рд╕реЗ Happy Diwali!</p>
    <p>рд╢реЗрдпрд░ рдХрд░реЗрдВ рдФрд░ рдкрд╛рдПрдВ chance for <strong>тВ╣300</strong> рдХрд╛ рд▓рдХреА рдбреНрд░реЙред</p>
    <label>рдЕрдкрдирд╛ рдирд╛рдо рджреЗрдВ: <input id="name" placeholder="рдЕрдкрдирд╛ рдирд╛рдо рд▓рд┐рдЦреЗрдВ"/></label>
    <div style="margin-top:10px">
      <button id="generateBtn">рдХрд╛рд░реНрдб рдмрдирд╛рдУ</button>
      <span class="count-badge" id="shareCountBadge">Shares: 0</span>
    </div>

    <div id="banner" class="hidden" style="margin-top:12px;padding:12px;border-radius:10px;background:linear-gradient(90deg,#ff7043,#8e24aa);color:#fff;text-align:center;">
      <div id="bannerText"></div>
      <div class="note">рдкрд╣рд▓реЗ 5 рджреЛрд╕реНрддреЛрдВ рдХреЗ рд╕рд╛рде рд╢реЗрдпрд░ рдХрд░реЗрдВ тАФ рдЗрд╕рдХреЗ рдмрд╛рдж рд╕реНрдкреЗрд╢рд▓ рд▓рд┐рдВрдХ рдЕрдирд▓реЙрдХ рд╣реЛрдЧрд╛ред</div>
    </div>

    <div class="share-row hidden" id="shareRow">
      <button id="whBtn">WhatsApp рдкреЗ рд╢реЗрдпрд░</button>
      <button id="tgBtn">Telegram рдкреЗ рд╢реЗрдпрд░</button>
      <button id="copyBtn">Link Copy</button>
    </div>

    <div id="afterUnlock" class="hidden earn-link">
      <p style="margin:6px 0"><strong>рдмрдзрд╛рдИ!</strong> рдЖрдкрдиреЗ рд╢реЗрдпрд░ рдкреВрд░рд╛ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ тАФ рдиреАрдЪреЗ рджрд┐рдпрд╛ рдЧрдпрд╛ рдмрдЯрди рдЦреЛрд▓реЗрдВ:</p>
      <!-- USER: Replace the href of the button below with your earning/referral link -->
      <a id="earnBtn" href="#" target="_blank" rel="noopener noreferrer"><button>Earn / Open Offer</button></a>
      <div class="small" style="margin-top:8px">(рдпрд╣ рд▓рд┐рдВрдХ рддрднреА рджрд┐рдЦреЗрдЧрд╛ рдЬрдм 5 рд╢реЗрдпрд░ рдкреВрд░реЗ рд╣реЛрдВрдЧреЗ)</div>
    </div>

    <div id="afterSubmit" class="hidden" style="margin-top:12px"></div>

    <div class="terms">
      <strong>рдирд┐рдпрдо рдФрд░ рд╢рд░реНрддреЗрдВ (Important):</strong>
      <ul>
        <li>рдпрд╣ рдПрдХ <em>рд▓рдХреА рдбреНрд░реЙ</em> рд╣реИ тАФ рд╕рднреА рдХреЛ тВ╣300 рдирд╣реАрдВ рдорд┐рд▓реЗрдЧрд╛ред рд╡рд┐рдЬреЗрддрд╛рдУрдВ рдХрд╛ рдЪрдпрди рд░реИрдВрдбрдо рддрд░реАрдХреЗ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред</li>
        <li>рдЖрдкрдХреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд░рд┐рдЪрд╛рд░реНрдЬ рдкрд╛рдирд╛ рд╣реЛ рддреЛ admin рджреНрд╡рд╛рд░рд╛ рдЪреБрдиреЗ рдЧрдП рд╡рд┐рдЬреЗрддрд╛рдУрдВ рдХреЛ рд╣реА рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛ред</li>
        <li>рд╣рдо рд╢реЗрдпрд░рд┐рдВрдЧ рдХреА рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рдХреА рдкреВрд░реНрдг рдЬрд╛рдБрдЪ (unique recipients) рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ тАФ рдЗрд╕рд▓рд┐рдП рдзреЛрдЦрд╛рдзрдбрд╝реА рдФрд░ рдлреЗрдХ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рдкрд░ рдпреВрдЬрд╝рд░ рдЕрдпреЛрдЧреНрдп рдард╣рд░рд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред</li>
        <li>рдиреАрдЪреЗ рдЬреЛ OFFER/REFERRAL рд▓рд┐рдВрдХ рдорд┐рд▓реЗрдЧрд╛ рд╡рд╣ рдЖрдк рд╣реА (site owner) рд╕реЗ рд╕реЗрдЯ рд╣реЛрдЧрд╛ тАФ рдпрд╣ рдкреВрд░рд╛ рд▓рд┐рдВрдХреНрд╕/affiliate/ads рдХреЗ рдЬрд░рд┐рдП рдХрдорд╛рдИ рдХрд╛ рдЬрд░рд┐рдпрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред</li>
      </ul>
    </div>
  </div>
</div>

<script>
// Config: User will replace this with their actual earning/referral link after uploading file.
const OFFER_LINK_PLACEHOLDER = "#"; // <-- Replace '#' with your earning/referral/affiliate link

// Elements
const nameInput = document.getElementById('name');
const generateBtn = document.getElementById('generateBtn');
const banner = document.getElementById('banner');
const bannerText = document.getElementById('bannerText');
const shareRow = document.getElementById('shareRow');
const whBtn = document.getElementById('whBtn');
const tgBtn = document.getElementById('tgBtn');
const copyBtn = document.getElementById('copyBtn');
const shareCountBadge = document.getElementById('shareCountBadge');
const afterUnlock = document.getElementById('afterUnlock');
const earnBtn = document.getElementById('earnBtn');
const namePreview = document.getElementById('namePreview');
const afterSubmit = document.getElementById('afterSubmit');

// State stored in localStorage so refresh persists
const STORAGE_KEY = 'diwali_share_state_v1';

function loadState(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return {count:0,sharedTargets:[]};
    return JSON.parse(raw);
  }catch(e){ return {count:0,sharedTargets:[]}; }
}
function saveState(state){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }

let state = loadState();
updateUI();

generateBtn.addEventListener('click', ()=>{
  const name = (nameInput.value || '').trim() || 'рдЖрдк';
  namePreview.textContent = name;
  banner.classList.remove('hidden');
  shareRow.classList.remove('hidden');
  bannerText.innerHTML = `<h2>ЁЯОЙ ${escapeHtml(name)} рдХреА рддрд░рдлрд╝ рд╕реЗ Happy Diwali!</h2><p>рдЕрдкрдиреЗ 5 рджреЛрд╕реНрддреЛрдВ рдХреЗ рд╕рд╛рде рдпреЗ рдХрд╛рд░реНрдб рд╢реЗрдпрд░ рдХрд░реЗрдВ тАФ рд╕реНрдкреЗрд╢рд▓ рд▓рд┐рдВрдХ рдЕрдирд▓реЙрдХ рд╣реЛрдЧрд╛ред</p>`;
  // set earn button href to placeholder until unlocked
  earnBtn.href = OFFER_LINK_PLACEHOLDER;
});

function updateUI(){
  shareCountBadge.textContent = 'Shares: ' + state.count;
  if(state.count >= 5){
    afterUnlock.classList.remove('hidden');
    shareRow.classList.add('hidden');
  } else {
    afterUnlock.classList.add('hidden');
  }
}

// Share helpers: open share URL and increment count on click
function recordShare(method){
  // rudimentary anti-abuse: don't allow more than one share click per second
  const now = Date.now();
  if(state.lastShareTime && now - state.lastShareTime < 1000) return;
  state.lastShareTime = now;
  state.count = Math.min(999, (state.count||0) + 1);
  saveState(state);
  updateUI();
  afterSubmit.innerHTML = `<div class="small">рдзреНрдпрд╛рди: рдЖрдкрдиреЗ ${state.count} рдмрд╛рд░ рд╢реЗрдпрд░ рдХрд┐рдпрд╛ рд╣реИред 5 рдмрд╛рд░ рд╢реЗрдпрд░ рд╣реЛрдиреЗ рдкрд░ рд▓рд┐рдВрдХ рдЕрдирд▓реЙрдХ рд╣реЛрдЧрд╛ред</div>`;
}

whBtn.addEventListener('click', ()=>{
  const text = encodeURIComponent(bannerText.innerText + "\n" + window.location.href);
  const url = `https://wa.me/?text=${text}`;
  window.open(url, '_blank');
  recordShare('whatsapp');
});

tgBtn.addEventListener('click', ()=>{
  const text = encodeURIComponent(bannerText.innerText + "\n" + window.location.href);
  const url = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${text}`;
  window.open(url, '_blank');
  recordShare('telegram');
});

copyBtn.addEventListener('click', async ()=>{
  try{
    await navigator.clipboard.writeText(window.location.href);
    alert('Link copied тАФ рдЕрдм рдЕрдкрдиреЗ рджреЛрд╕реНрддреЛрдВ рдХреЛ paste рдХрд░рдХреЗ рднреЗрдЬ рджреЗрдВред');
  }catch(e){
    prompt('Copy this link', window.location.href);
  }
  recordShare('copy');
});

// Set earn link when unlocked - owner must replace placeholder with real link
if(OFFER_LINK_PLACEHOLDER && OFFER_LINK_PLACEHOLDER !== '#'){
  earnBtn.href = OFFER_LINK_PLACEHOLDER;
} else {
  // keep current href but inform user (site owner) to replace it after upload
  earnBtn.href = '#';
  earnBtn.addEventListener('click', (e)=>{
    if(state.count < 5){ e.preventDefault(); alert('рдкрд╣рд▓реЗ 5 рджреЛрд╕реНрддреЛрдВ рдХреЛ рд╢реЗрдпрд░ рдХрд░реЗрдВ тАФ рдлрд┐рд░ рд▓рд┐рдВрдХ рдЦреБрд▓реЗрдЧрд╛ред'); }
    else if(earnBtn.href === '#' || earnBtn.href.trim() === ''){ e.preventDefault(); alert('Owner: рдЗрд╕ рдмрдЯрди рдореЗрдВ рдЕрдкрдиреА earning/referral рд▓рд┐рдВрдХ рдбрд╛рд▓реЗрдВред'); }
  });
}

// helper to escape html
function escapeHtml(text){ return String(text).replace(/[&<>"']/g, function(m){return{'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]}); }

</script>
</body>
</html>
