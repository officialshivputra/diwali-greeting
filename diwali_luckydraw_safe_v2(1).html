<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ЁЯОЖ Diwali Lucky Draw тАФ рд╢реБрдн рджреАрдкрд╛рд╡рд▓реА</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:#fff8ed;color:#2b2b2b;margin:0;padding:18px}
  .wrap{max-width:820px;margin:14px auto}
  .card{background:linear-gradient(120deg,#ffecd2,#fcb69f);padding:18px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.06)}
  h1{margin:0 0 8px 0;font-size:20px}
  input, button{font-size:16px;padding:10px;border-radius:8px;border:1px solid #e6a373}
  button{background:#ff5722;color:#fff;border:none;cursor:pointer}
  .share-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .note{font-size:13px;color:#5a3b00;margin-top:8px}
  .hidden{display:none}
  .earn-link{margin-top:16px;padding:12px;background:#fff;border-radius:8px;border:1px dashed #ddd;text-align:center}
  .count-badge{background:#fff;padding:6px 10px;border-radius:12px;font-weight:700;display:inline-block;margin-left:8px}
  .terms{background:#fff;padding:12px;border-radius:8px;margin-top:12px;border-left:4px solid #ffd54f}
  .small{font-size:13px;color:#4b4b4b}
  a.btn{display:inline-block;padding:10px 16px;background:#ff5722;color:#fff;border-radius:8px;text-decoration:none}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>ЁЯОЖ Diwali Lucky Draw тАФ рд╢реБрдн рджреАрдкрд╛рд╡рд▓реА</h1>
    <p>рдиреАрдЪреЗ рдЕрдкрдирд╛ рдирд╛рдо рдбрд╛рд▓реЗрдВ рдФрд░ personalized рдХрд╛рд░реНрдб рдмрдирд╛рдПрдВред 5 рджреЛрд╕реНрддреЛрдВ рдХреЛ рд╢реЗрдпрд░ рдХрд░рдиреЗ рдкрд░ рд╕реНрдкреЗрд╢рд▓ рд▓рд┐рдВрдХ рдЕрдирд▓реЙрдХ рд╣реЛрдЧрд╛ред</p>

    <label>рдЕрдкрдирд╛ рдирд╛рдо: <input id="name" placeholder="рдЕрдкрдирд╛ рдирд╛рдо рд▓рд┐рдЦреЗрдВ"/></label>
    <div style="margin-top:10px">
      <button id="generateBtn">рдХрд╛рд░реНрдб рдмрдирд╛рдУ</button>
      <span class="count-badge" id="shareCountBadge">Shares: 0</span>
    </div>

    <div id="banner" class="hidden" style="margin-top:12px;padding:12px;border-radius:10px;background:linear-gradient(90deg,#ff7043,#8e24aa);color:#fff;text-align:center;">
      <div id="bannerText"></div>
      <div class="note">рдкрд╣рд▓реЗ 5 рджреЛрд╕реНрддреЛрдВ рдХреЗ рд╕рд╛рде рд╢реЗрдпрд░ рдХрд░реЗрдВ тАФ рдЗрд╕рдХреЗ рдмрд╛рдж рд╕реНрдкреЗрд╢рд▓ рд▓рд┐рдВрдХ рдЕрдирд▓реЙрдХ рд╣реЛрдЧрд╛ред</div>
    </div>

    <div class="share-row hidden" id="shareRow">
      <button id="whBtn">WhatsApp рдкрд░ рд╢реЗрдпрд░ рдХрд░реЗрдВ</button>
      <button id="tgBtn">Telegram рдкрд░ рд╢реЗрдпрд░ рдХрд░реЗрдВ</button>
      <button id="copyBtn">Link Copy рдХрд░реЗрдВ</button>
    </div>

    <div id="afterUnlock" class="hidden earn-link">
      <p style="margin:6px 0"><strong>рдмрдзрд╛рдИ!</strong> рдЖрдкрдиреЗ рд╢реЗрдпрд░ рдкреВрд░рд╛ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ тАФ рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ:</p>
      <!-- Replace '#' with your earning/referral link -->
      <a id="earnBtn" class="btn" href="#" target="_blank" rel="noopener noreferrer">Open Special Offer / Redeem Coupon</a>
      <div class="small" style="margin-top:8px">(рдпрд╣ рд▓рд┐рдВрдХ рддрднреА рджрд┐рдЦреЗрдЧрд╛ рдЬрдм 5 рд╢реЗрдпрд░ рдкреВрд░реЗ рд╣реЛрдВрдЧреЗ)</div>
    </div>

    <div id="afterSubmit" class="hidden" style="margin-top:12px"></div>

    <div class="terms">
      <strong>рдирд┐рдпрдо рдПрд╡рдВ рд╢рд░реНрддреЗрдВ тАФ Terms & Conditions:</strong>
      <ul>
        <li>рдпрд╣ рдПрдХ рдордиреЛрд░рдВрдЬрди-рдЙрджреНрджреЗрд╢реНрдп (entertainment-only) рд▓рдХреА рдбреНрд░реЙ рд╣реИред No guarantee of reward is provided.</li>
        <li>Participation does not create any legally enforceable right to a recharge or coupon.</li>
        <li>Winners will be selected at random and are subject to verification. Fraudulent entries will be disqualified.</li>
        <li>Owner/website may use affiliate links or sponsored offers for the redeem link; ensure proper disclosure to users.</li>
      </ul>
      <p class="small">Owner note: Replace the href of the "Open Special Offer" button with your earning/referral/affiliate link after uploading this file to your site.</p>
    </div>
  </div>
</div>

<script>
// Config: replace with your real earning/referral link after upload
const OFFER_LINK = "#"; // <-- change to your link

// Elements
const nameInput = document.getElementById('name');
const generateBtn = document.getElementById('generateBtn');
const banner = document.getElementById('banner');
const bannerText = document.getElementById('bannerText');
const shareRow = document.getElementById('shareRow');
const whBtn = document.getElementById('whBtn');
const tgBtn = document.getElementById('tgBtn');
const copyBtn = document.getElementById('copyBtn');
const shareCountBadge = document.getElementById('shareCountBadge');
const afterUnlock = document.getElementById('afterUnlock');
const earnBtn = document.getElementById('earnBtn');
const afterSubmit = document.getElementById('afterSubmit');

const STORAGE_KEY = 'diwali_luckydraw_state_v2';

function loadState(){
  try{ const raw = localStorage.getItem(STORAGE_KEY); return raw ? JSON.parse(raw) : {count:0}; }
  catch(e){ return {count:0}; }
}
function saveState(s){ localStorage.setItem(STORAGE_KEY, JSON.stringify(s)); }

let state = loadState();
updateUI();

generateBtn.addEventListener('click', ()=>{
  const name = (nameInput.value || '').trim() || 'рдЖрдк';
  banner.classList.remove('hidden');
  shareRow.classList.remove('hidden');
  bannerText.innerHTML = `<h2>ЁЯОЙ ${escapeHtml(name)} рдХреА рддрд░рдлрд╝ рд╕реЗ Happy Diwali!</h2><p>рдЕрдкрдиреЗ 5 рджреЛрд╕реНрддреЛрдВ рдХреЗ рд╕рд╛рде рдпрд╣ рдХрд╛рд░реНрдб рд╢реЗрдпрд░ рдХрд░реЗрдВ тАФ рд╕реНрдкреЗрд╢рд▓ рд▓рд┐рдВрдХ рдЕрдирд▓реЙрдХ рд╣реЛрдЧрд╛ред</p>`;
  earnBtn.href = OFFER_LINK;
});

function updateUI(){
  shareCountBadge.textContent = 'Shares: ' + (state.count || 0);
  if((state.count || 0) >= 5){
    afterUnlock.classList.remove('hidden');
    shareRow.classList.add('hidden');
  } else {
    afterUnlock.classList.add('hidden');
    shareRow.classList.remove('hidden');
  }
}

function recordShare(){
  const now = Date.now();
  if(state.last && now - state.last < 600) return; // avoid accidental double clicks
  state.last = now;
  state.count = Math.min(999, (state.count || 0) + 1);
  saveState(state);
  updateUI();
  afterSubmit.classList.remove('hidden');
  afterSubmit.innerHTML = `<div class="small">рдзреНрдпрд╛рди: рдЖрдкрдиреЗ рдЕрднреА ${state.count} рдмрд╛рд░ рд╢реЗрдпрд░ рдХрд┐рдпрд╛ рд╣реИред 5 рдмрд╛рд░ рд╢реЗрдпрд░ рдХрд░рдиреЗ рдкрд░ рд▓рд┐рдВрдХ рдЕрдирд▓реЙрдХ рд╣реЛрдЧрд╛ред</div>`;
}

whBtn.addEventListener('click', ()=>{
  const text = encodeURIComponent(bannerText.innerText + "\n" + window.location.href);
  window.open(`https://wa.me/?text=${text}`, '_blank');
  recordShare();
});
tgBtn.addEventListener('click', ()=>{
  const text = encodeURIComponent(bannerText.innerText + "\n" + window.location.href);
  window.open(`https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${text}`, '_blank');
  recordShare();
});
copyBtn.addEventListener('click', async ()=>{
  try{ await navigator.clipboard.writeText(window.location.href); alert('Link copied тАФ рдЕрдм paste рдХрд░ рдХреЗ рднреЗрдЬ рджреЗрдВ'); }
  catch(e){ prompt('Copy this link', window.location.href); }
  recordShare();
});

// Ensure earn button blocked until unlocked or placeholder set
earnBtn.addEventListener('click', (e)=>{
  if((state.count || 0) < 5){ e.preventDefault(); alert('рдкрд╣рд▓реЗ 5 рджреЛрд╕реНрддреЛрдВ рдХреЛ рд╢реЗрдпрд░ рдХрд░реЗрдВ тАФ рдлрд┐рд░ рд▓рд┐рдВрдХ рдЦреБрд▓реЗрдЧрд╛ред'); }
  else if(earnBtn.href === '#' || !earnBtn.href || earnBtn.href === window.location.href){ e.preventDefault(); alert('Owner: рдХреГрдкрдпрд╛ earn/referral link рдпрд╣рд╛рдБ рд╕реЗрдЯ рдХрд░реЗрдВред'); }
});

// basic html escape
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){return{'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]}); }
</script>
</body>
</html>
